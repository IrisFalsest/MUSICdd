(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/play/play"],{"064f":function(t,i,n){"use strict";n.r(i);var e=n("4709"),a=n("be74");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(i,t,(function(){return a[t]}))}(s);n("f8bc");var o=n("f0c5"),r=Object(o["a"])(a["default"],e["b"],e["c"],!1,null,"5c098f82",null,!1,e["a"],void 0);i["default"]=r.exports},2005:function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={components:{bingLyric:function(){n.e("components/bing-lyric/bing-lyric").then(function(){return resolve(n("1c5f"))}.bind(null,n)).catch(n.oe)}},data:function(){return{centerStyle:{btnImg:"../../static/icon/play.png"},lyricStyle:{},cuAreaStyle:{width:"100vw"},lyrics:[],timer:null,curTime:0,options:{},playStatus:0,playData:[],currentIndex:null,shareParams:{title:"",path:"/pages/tabbar/shopSing/shopSing",imageUrl:""},currentPlay:{},bgAudioManager:null}},watch:{currentPlay:{handler:function(t,i){t&&(this.shareParams.title="邀请您查看音乐《".concat(t.songName,"》")||!1,this.shareParams.imageUrl=t.songCoverPhotoUrl||"")},deep:!0,immediate:!0}},onLoad:function(t){if(this.createAudio(),t.list){var i=JSON.parse(decodeURIComponent(t.list));console.log(i),this.playData=i}var n=this.playData[t.index];this.currentPlay=n,this.currentIndex=Number(t.index),console.log("正在播放索引",this.currentIndex),null!=n.songLyrics?this.lyrics=n.songLyrics.split(/[(\r\n)\r\n]+/):this.lyrics=[],this.options=n,this.makeTime(),this.setSong()},methods:{createAudio:function(){this.curTime=0,clearTimeout(this.$globalDataAudio.timer),this.$globalDataAudio.timer=null,this.$globalDataAudio.destroyAudioCtx(),this.$globalDataAudio.initAudioCtx(),this.$globalDataAudio.hasAudioStatus(),this.bgAudioManager=this.$globalDataAudio.audioCtx},NextSong:function(){this.currentIndex===this.playData.length&&(this.currentIndex=0),console.log("当前索引",this.currentIndex),this.currentIndex++,console.log("更改索引",this.currentIndex),this.stop();var t=this.playData[this.currentIndex%this.playData.length];this.currentPlay=t,null!=t.songLyrics?this.lyrics=t.songLyrics.split(/[(\r\n)\r\n]+/):this.lyrics=[],this.options=t,this.makeTime(),this.setSong()},LastSong:function(){0===this.currentIndex&&(this.currentIndex=this.playData.length),this.currentIndex--,this.stop();var t=this.playData[(this.currentIndex+this.playData.length)%this.playData.length];this.currentPlay=t,null!=t.songLyrics?this.lyrics=t.songLyrics.split(/[(\r\n)\r\n]+/):this.lyrics=[],this.options=t,this.makeTime(),this.setSong()},setSong:function(){var i=this;this.createAudio(),this.$globalDataAudio.stop=0,console.log("正在播放",this.options),this.bgAudioManager.title=this.options.songTitle,this.bgAudioManager.singer=this.options.songName,this.bgAudioManager.coverImgUrl=this.options.songCoverPhotoUrl,this.bgAudioManager.src=this.options.songFileUrl,this.bgAudioManager.play(),0==this.options.isBuy&&(this.$globalDataAudio.timer=setTimeout((function(){i.$globalDataAudio.destroyAudioCtx(),i.$globalDataAudio.audioCtx=null,t.showModal({title:"提示",content:"试听结束，购买后可播放",success:function(i){i.confirm?(console.log("用户点击确定"),t.reLaunch({url:"/pages/tabbar/shopSing/shopSing"})):i.cancel&&(console.log("用户点击取消"),t.reLaunch({url:"/pages/tabbar/shopSing/shopSing"}))}})}),25e3))},audition:function(t,i,n){clearTimeout(this.$globalDataAudio.timer),this.$globalDataAudio.timer=null;var e=this.$globalDataAudio.audioCtx;e.src=t.songFileUrl,e.play()},copy:function(i){console.log("index",i),t.showModal({content:JSON.stringify(i.lyrics)})},centerBtnClick:function(t){this.bgAudioManager.seek(Number(t.centerTime)||0),this.curTime=t.centerTime,this.bgAudioManager.play()},makeTime:function(){var t=this;this.playStatus=0,this.bgAudioManager.play(),this.timer=setInterval((function(){setTimeout((function(){t.curTime+=.5}),0)}),500)},out:function(t){console.log(t),this.curTime+=t},stop:function(){this.$globalDataAudio.stop=1,this.playStatus=1,this.bgAudioManager.pause(),clearTimeout(this.timer)}},onShareAppMessage:function(t){return{title:this.shareParams.title,path:this.shareParams.path,imageUrl:this.shareParams.imageUrl}}};i.default=e}).call(this,n("543d")["default"])},3748:function(t,i,n){},4709:function(t,i,n){"use strict";n.d(i,"b",(function(){return a})),n.d(i,"c",(function(){return s})),n.d(i,"a",(function(){return e}));var e={whiteHeads:function(){return n.e("components/whiteHeads/whiteHeads").then(n.bind(null,"ebb1"))},bingLyric:function(){return n.e("components/bing-lyric/bing-lyric").then(n.bind(null,"1c5f"))}},a=function(){var t=this.$createElement;this._self._c},s=[]},be74:function(t,i,n){"use strict";n.r(i);var e=n("2005"),a=n.n(e);for(var s in e)["default"].indexOf(s)<0&&function(t){n.d(i,t,(function(){return e[t]}))}(s);i["default"]=a.a},d412:function(t,i,n){"use strict";(function(t,i){var e=n("4ea4");n("4812");e(n("66fd"));var a=e(n("064f"));t.__webpack_require_UNI_MP_PLUGIN__=n,i(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},f8bc:function(t,i,n){"use strict";var e=n("3748"),a=n.n(e);a.a}},[["d412","common/runtime","common/vendor"]]]);