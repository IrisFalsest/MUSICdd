(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/leaderboardDetails/leaderboardDetails"],{"0534":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{rankingList:[],checkIndex:null,popList:{},shopList:[],rankingId:"",userInfo:{},userId:null,value:"",clickUserid:"",pageFlag:!1,score:""}},methods:{goPageDetails:function(n){e.showModal({title:"温馨提示",content:"您确定要选购商品吗？",confirmText:"立即购买",cancelText:"残忍拒绝",success:function(t){t.confirm?e.navigateTo({url:"/pages/goodDetails/goodDetails?id="+n}):t.cancel&&console.log("用户点击取消")}})},getInfo:function(){var e=this;this.$req.get("mobileEndUser/info?userId="+this.userId).then((function(n){e.userInfo=n.data.user}))},getScore:function(){var e=this;this.$req.get("system/config/configKey/sys.user.socre").then((function(n){e.score=n.msg}))},nextList:function(){e.reLaunch({url:"/pages/tabbar/goods/goods"})},getDetails:function(){var e=this,n={rankingId:this.rankingId,type:4};this.$req.get("ranking/acquisitionActivityRankingById",n).then((function(n){console.log(n),e.popList=n.data,e.shopList=n.data.goods.slice(0,2),e.rankingList=n.data.user[0],e.pageFlag=!0}))},submit:function(){var n=this,t=this.userInfo.score;if(console.log(t),""!=this.value){if(this.value>t)return e.showToast({title:"积分不足，您可以通过购买歌曲或商品获取积分",icon:"none"}),void setTimeout((function(){e.switchTab({url:"/pages/tabbar/goods/goods"})}),1e3);e.showLoading();var o={giver:this.userInfo.id,recipient:this.rankingList.userId,score:this.value};this.$req.put("mobileEndUser/rewardPoints",o,"form").then((function(t){if(e.showToast({title:t.msg,icon:"none"}),200==t.code){n.$req.get("mobileEndUser/info",{userId:n.userInfo.id}).then((function(t){n.userInfo=JSON.parse(JSON.stringify(t.data.user)),e.setStorageSync("userInfo",t.data.user)}));var o={userId:n.rankingList.userId,userHeat:n.value};n.$req.post("ranking/modifyHeat",o,"form").then((function(t){200==t.code&&(n.getDetails(),n.value=""),e.showToast({title:t.msg,icon:"none"})}))}}))}else e.showToast({title:"输入的积分不能为空",icon:"none"})}},onLoad:function(n){console.log(n),this.checkIndex=n.index,this.rankingId=n.id,this.clickUserid=n.userId,this.userId=e.getStorageSync("userInfo").id,this.getInfo(),this.getDetails(),this.getScore()}};n.default=t}).call(this,t("543d")["default"])},"0af5":function(e,n,t){"use strict";t.r(n);var o=t("0534"),i=t.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(s);n["default"]=i.a},1555:function(e,n,t){},"1f5c":function(e,n,t){"use strict";t.r(n);var o=t("aeb3"),i=t("0af5");for(var s in i)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(s);t("26ef");var a=t("f0c5"),r=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,"f22c517c",null,!1,o["a"],void 0);n["default"]=r.exports},"26ef":function(e,n,t){"use strict";var o=t("1555"),i=t.n(o);i.a},"2f2b":function(e,n,t){"use strict";(function(e,n){var o=t("4ea4");t("4812");o(t("66fd"));var i=o(t("1f5c"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(i.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},aeb3:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return s})),t.d(n,"a",(function(){return o}));var o={heads:function(){return t.e("components/heads/heads").then(t.bind(null,"3ce6"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-input/u-input")]).then(t.bind(null,"c9bc"))},uWaterfall:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-waterfall/u-waterfall")]).then(t.bind(null,"d830"))},uLazyLoad:function(){return t.e("uview-ui/components/u-lazy-load/u-lazy-load").then(t.bind(null,"270e4"))},uLoadmore:function(){return t.e("uview-ui/components/u-loadmore/u-loadmore").then(t.bind(null,"618a"))}},i=function(){var e=this.$createElement;this._self._c},s=[]}},[["2f2b","common/runtime","common/vendor"]]]);