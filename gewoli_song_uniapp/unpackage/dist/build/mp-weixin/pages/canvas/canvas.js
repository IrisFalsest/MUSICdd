(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/canvas/canvas"],{"18ee":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n}));var n={uniPopup:function(){return a.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(a.bind(null,"f8c6"))},ccBeautyPoster:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/cc-beautyPoster/components/cc-beautyPoster/cc-beautyPoster")]).then(a.bind(null,"d425"))}},o=function(){var t=this.$createElement;this._self._c},i=[]},"1d08":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("4a78"),o={data:function(){return{shows:!1,posterData:{name:"",logo:"",title:"",money:"",img:"",url:"",remark:""},imgUrl:null,flag:!0,id:"",avater:null}},methods:{uploadHaiBao:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(a){t.uploadFile({url:n.BASEURL+"/file/ossUpload",filePath:a.tempFilePaths[0],header:{Authorization:t.getStorageSync("token")},name:"file",formData:{type:"2"},success:function(t){console.log(JSON.parse(t.data)),e.addTm(JSON.parse(t.data).msg)}})}})},addTm:function(e){var a=this,n={backgroundImage:e,userId:t.getStorageSync("userInfo").id,createBy:t.getStorageSync("userInfo").nickName,createTime:"",field:"",id:0,logoImage:"",modifyBy:"",modifyTime:"",status:0,templateName:"",type:""};1==this.flag?this.$req.post("template",n).then((function(t){t.data;a.getList()})):(n.id=this.id,this.$req.put("template",n).then((function(t){t.data;a.getList()})))},openPopup:function(){this.downloadFile(this.imgUrl),this.downloadFileAvatar(this.avater)},openPoster:function(){var e=this;this.shows=!1,t.showLoading({title:"海报绘制中.."}),this.$refs.popup.open(),setTimeout((function(){t.hideLoading(),e.shows=!0}),400)},hidePoster:function(){this.$refs.popup.close(),t.reLaunch({url:"/pages/tabbar/center/index"})},getList:function(){var e=this,a=t.getStorageSync("userInfo").id;this.$req.get("template/"+a).then((function(t){var a=t.data;e.id=a.id,e.imgUrl=a.backgroundImage,e.avater=a.avatar,e.posterData.name=a.nickName,e.posterData.logo="/static/logo.png",e.posterData.title="邀请您成为新用户",e.posterData.remark=a.remark,t.data?e.flag=!1:e.flag=!0}))},downloadFile:function(e){var a=this;t.downloadFile({url:e,success:function(t){console.log(t.tempFilePath),a.posterData.img=t.tempFilePath}})},downloadFileAvatar:function(e){var a=this;t.downloadFile({url:e,success:function(t){console.log("头像",t.tempFilePath),a.posterData.logo=t.tempFilePath,a.openPoster()}})}},onLoad:function(){this.getList()}};e.default=o}).call(this,a("543d")["default"])},4666:function(t,e,a){},"8ab3":function(t,e,a){"use strict";a.r(e);var n=a("1d08"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=o.a},a09b:function(t,e,a){"use strict";(function(t,e){var n=a("4ea4");a("4812");n(a("66fd"));var o=n(a("cb0d"));t.__webpack_require_UNI_MP_PLUGIN__=a,e(o.default)}).call(this,a("bc2e")["default"],a("543d")["createPage"])},c23b:function(t,e,a){"use strict";var n=a("4666"),o=a.n(n);o.a},cb0d:function(t,e,a){"use strict";a.r(e);var n=a("18ee"),o=a("8ab3");for(var i in o)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(i);a("c23b");var r=a("f0c5"),u=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"173cf385",null,!1,n["a"],void 0);e["default"]=u.exports}},[["a09b","common/runtime","common/vendor"]]]);