{"version":3,"sources":["webpack:///C:/Users/lenovo/Desktop/gewoli_song_uniapp/uni_modules/cc-beautyPoster/components/cc-beautyPoster/cc-beautyPoster.vue?c428","webpack:///C:/Users/lenovo/Desktop/gewoli_song_uniapp/uni_modules/cc-beautyPoster/components/cc-beautyPoster/cc-beautyPoster.vue?9249","webpack:///C:/Users/lenovo/Desktop/gewoli_song_uniapp/uni_modules/cc-beautyPoster/components/cc-beautyPoster/cc-beautyPoster.vue?e447","webpack:///C:/Users/lenovo/Desktop/gewoli_song_uniapp/uni_modules/cc-beautyPoster/components/cc-beautyPoster/cc-beautyPoster.vue?5d16","uni-app:///uni_modules/cc-beautyPoster/components/cc-beautyPoster/cc-beautyPoster.vue","webpack:///C:/Users/lenovo/Desktop/gewoli_song_uniapp/uni_modules/cc-beautyPoster/components/cc-beautyPoster/cc-beautyPoster.vue?162d","webpack:///C:/Users/lenovo/Desktop/gewoli_song_uniapp/uni_modules/cc-beautyPoster/components/cc-beautyPoster/cc-beautyPoster.vue?4d12"],"names":["mixins","methods","setData","tepKey","tepData","Object","key","after","front","get","set","that","enumerable","configurable","isFn","data","windowWidth","windowHeight","colors","ctx","imgUrl","isShow","canvasShow","props","posterData","type","created","onShareAppMessage","title","path","imageUrl","onReachBottom","getSystem","uni","success","console","setPoster","context","setText","setEwm","uQRCode","canvasId","componentInstance","text","size","margin","fileType","setTimeout","complete","setRadius","setCircular","setGoodsImg","setGoodsName","x","y","width","height","line","color","align","baseline","bold","txt","drawText","saveImg","wx","scope","filePath","icon","fail"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwI;AACxI;AACmE;AACL;AACqC;;;AAGnG;AACgL;AAChL,gBAAgB,yLAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,sGAAM;AACR,EAAE,+GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAgqB,CAAgB,qrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACsBprB;AAAA;EAAA;AAAA;EAGAA,SACA;IACAC;MACAC;QACA;QACA;UACAC;UACAA;YACA;cACA;cACAC;cACAA;YACA;cACAA;YACA;UACA;UACA;QACA;QACA;UACA;QACA;QACAC;UACA;UACAC;UACA;UACA;UACA;YACAC;YACAC;UACA;YACAD;YACAC;UACA;UACA;YACAH;cACAI;gBACA;cACA;cACAC;gBACAF;gBACAG;cACA;cACAC;cACAC;YACA;YACAL;UACA;YACAG;UACA;QACA;QACAG;MACA;IACA;EACA,EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;IACAC;MACAC;IACA;EACA;EACAC;IACA;IAEA;EACA;EACAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACA;AACA;AACA;EACAC;AAAA,6EAKA,kGACA;EACAC;IACA;IACAC;MACAC;QACAC;QACAxB;UACAM;UACAD;QACA;MACA;IACA;EACA;EAEAoB;IACAH;MACAL;IACA;IACA;IACAT;IACAA;IACA;AACA;AACA;IACA;MACAkB;MACAA;MACA;QACAA;MACA;QACAA;MACA;MACAA;MACAA;MACAA;IACA;IACAC;IACAA;IACAnB;IACA;AACA;AACA;IACAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;EACA;EAEAoB;IAAA;IACAJ;IACA;IACA;IACA;IAEA;IACAA;IAEAK;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAZ;QACAC;QAEAA;;QAEA;QACA;;QAEAY;UACA;UACA;UACA5B;UACAA;YACA4B;cACAd,yBACA;gBACAQ;gBACAP;kBACAC;kBACA;gBACA;cACA,GACA,OACA;YACA;UACA;UACAF;QACA;MACA;MACAe;IACA;EACA;EACAC;IACA;AACA;AACA;IACA9B;IACAA;IACAA;IACAA;IACAA;IACAA;IACAA;IACA;IACAA;IACAA;IACAA;;IAEAA;IACAA;IACAA;EACA;EACA+B;IACA;IACA;AACA;AACA;IACA;IACA/B;IACA;IACAA;IACAA;IACAA;;IAEAA;IACAA;IACAA;EACA;EACAgC;IACA;IACA;IACAhC;IACAA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACAiC;IAAA;IAEA;MACA;MACA;QACAC;QAAA;QACAC;QAAA;QACAC;QACAC;QACAC;QACAC;QACAd;QAAA;QACAe;QACAC;QACAjB;QACAkB;MACA;MAEA;MACA;MACA;QACA;UACAR;UACAC;UACAI;UACAd;UACAe;UACAC;UACAjB;UACAkB;QACA;QACA;UACA;YACAC;UACA;UACA;QACA;MACA;IACA;IACA;IACA;IACAf;MACA;MACA;MACA5B;MACAA;QACA4B;UACAd,yBACA;YACAQ;YACAP;cACAC;cACA;YACA;UACA,GACA,OACA;QACA;MACA;MACAF;IACA;EACA;EACA;AACA;AACA;AACA;AACA;EACA8B;IACA5B;IACAhB;IACAA;IACAA;IACAA;IACAA;IACA;MACAgB;MACAhB;MACAA;IACA;IACAA;IACA;MACAA;MACAA;IACA;IACAA;EACA;EACA6C;IACA;IACA/B;MACAL;IACA;IACA;IAEAK;MACAC;QACAD;QACAE;QACA;UACA8B;YACAC;YACAhC;cACAC;YACA;UACA;QACA;UACAY;YACAd;cACAkC;cACAjC;gBACAD;gBACAA;kBACAL;kBACAwC;gBACA;cACA;cACAC;gBACAlC;gBACAF;kBACAL;kBACAwC;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;EAuBA;AACA;AAAA,2B;;;;;;;;;;;;;ACpbA;AAAA;AAAA;AAAA;AAAg+B,CAAgB,09BAAG,EAAC,C;;;;;;;;;;;ACAp/B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/cc-beautyPoster/components/cc-beautyPoster/cc-beautyPoster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./cc-beautyPoster.vue?vue&type=template&id=629d7fbc&scoped=true&\"\nvar renderjs\nimport script from \"./cc-beautyPoster.vue?vue&type=script&lang=js&\"\nexport * from \"./cc-beautyPoster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cc-beautyPoster.vue?vue&type=style&index=0&id=629d7fbc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"629d7fbc\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/cc-beautyPoster/components/cc-beautyPoster/cc-beautyPoster.vue\"\nexport default component.exports","export * from \"-!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cc-beautyPoster.vue?vue&type=template&id=629d7fbc&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cc-beautyPoster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cc-beautyPoster.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<!-- 绘制canvas -->\n\t\t<canvas class=\"mycanvas\" canvas-id=\"mycanvas\" :style=\"'width:' + (windowWidth - 60) + 'px;height:520px'\"></canvas>\n\n\t\t<block>\n\t\t\t<!-- 展示图片 -->\n\t\t\t<image v-if=\"canvasShow\" class=\"imgs\" :style=\"'width:' + (windowWidth - 60) + 'px;height:520px'\" :src=\"imgUrl\" mode=\"\"></image>\n\t\t</block>\n\n\t\t<!-- #ifndef H5 -->\n\t\t<!-- <view class=\"saveImg\" @tap=\"saveImg\" :style=\"'background:' + colors\">保存图片</view> -->\n\t\t<button class=\"saveImg\" :style=\"'background:' + colors\" open-type=\"share\">分享</button>\n\n\t\t<!-- #endif -->\n\t\t<!-- #ifdef H5 -->\n\t\t<p class=\"tips\">长按图片进行保存</p>\n\t\t<!-- #endif -->\n\t</view>\n</template>\n\n<script>\nimport uQRCode from './uqrcode.js';\n\nexport default {\n\tmixins: [\n\t\t{\n\t\t\tmethods: {\n\t\t\t\tsetData: function (obj, callback) {\n\t\t\t\t\tlet that = this;\n\t\t\t\t\tconst handleData = (tepData, tepKey, afterKey) => {\n\t\t\t\t\t\ttepKey = tepKey.split('.');\n\t\t\t\t\t\ttepKey.forEach((item) => {\n\t\t\t\t\t\t\tif (tepData[item] === null || tepData[item] === undefined) {\n\t\t\t\t\t\t\t\tlet reg = /^[0-9]+$/;\n\t\t\t\t\t\t\t\ttepData[item] = reg.test(afterKey) ? [] : {};\n\t\t\t\t\t\t\t\ttepData = tepData[item];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttepData = tepData[item];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn tepData;\n\t\t\t\t\t};\n\t\t\t\t\tconst isFn = function (value) {\n\t\t\t\t\t\treturn typeof value == 'function' || false;\n\t\t\t\t\t};\n\t\t\t\t\tObject.keys(obj).forEach(function (key) {\n\t\t\t\t\t\tlet val = obj[key];\n\t\t\t\t\t\tkey = key.replace(/\\]/g, '').replace(/\\[/g, '.');\n\t\t\t\t\t\tlet front, after;\n\t\t\t\t\t\tlet index_after = key.lastIndexOf('.');\n\t\t\t\t\t\tif (index_after != -1) {\n\t\t\t\t\t\t\tafter = key.slice(index_after + 1);\n\t\t\t\t\t\t\tfront = handleData(that, key.slice(0, index_after), after);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tafter = key;\n\t\t\t\t\t\t\tfront = that;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (front.$data && front.$data[after] === undefined) {\n\t\t\t\t\t\t\tObject.defineProperty(front, after, {\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\treturn front.$data[after];\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tset(newValue) {\n\t\t\t\t\t\t\t\t\tfront.$data[after] = newValue;\n\t\t\t\t\t\t\t\t\tthat.$forceUpdate();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfront[after] = val;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthat.$set(front, after, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tisFn(callback) && this.$nextTick(callback);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t],\n\tdata() {\n\t\treturn {\n\t\t\twindowWidth: '',\n\t\t\twindowHeight: '',\n\t\t\tcolors: 'red',\n\t\t\tctx: '',\n\t\t\timgUrl: '',\n\t\t\tisShow: false,\n\t\t\tcanvasShow: true\n\t\t};\n\t},\n\n\tprops: {\n\t\t// 海报生成数据\n\t\tposterData: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.getSystem();\n\n\t\tthis.setPoster();\n\t},\n\tonShareAppMessage: (e) => {\n\t\treturn {\n\t\t\ttitle: this.posterData.title, // 标题\n\t\t\tpath: '/pages/tabbar/index/index', // 分享路径\n\t\t\timageUrl: this.posterData.img // 分享图\n\t\t};\n\t},\n\t/**\n\t * 页面上拉触底事件的处理函数\n\t */\n\tonReachBottom: function () {},\n\n\t/**\n\t * 用户点击右上角分享\n\t */\n\tonShareAppMessage: function () {},\n\tmethods: {\n\t\tgetSystem() {\n\t\t\tlet that = this;\n\t\t\tuni.getSystemInfo({\n\t\t\t\tsuccess: function (res) {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tthat.setData({\n\t\t\t\t\t\twindowHeight: res.windowHeight,\n\t\t\t\t\t\twindowWidth: res.windowWidth\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tsetPoster() {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '海报生成中...'\n\t\t\t});\n\t\t\tlet ctx = uni.createCanvasContext('mycanvas', this); // 绘制背景\n\t\t\tctx.fillStyle = '#FFFFFF';\n\t\t\tctx.fillRect(0, 0, this.windowWidth - 60, 520);\n\t\t\t/**\n\t\t\t * 绘制名称\n\t\t\t */\n\t\t\tconst setText = (context, fs, color, x, y, c, bold) => {\n\t\t\t\tcontext.setFillStyle(color);\n\t\t\t\tcontext.setTextAlign('left');\n\t\t\t\tif (bold) {\n\t\t\t\t\tcontext.font = 'normal bold 20px Arial,sans-serif';\n\t\t\t\t} else {\n\t\t\t\t\tcontext.font = 'normal 20px Arial,sans-serif';\n\t\t\t\t}\n\t\t\t\tcontext.setFontSize(fs);\n\t\t\t\tcontext.fillText(c, x, y);\n\t\t\t\tcontext.restore();\n\t\t\t};\n\t\t\tsetText(ctx, 14, '#333', 85, 35, this.posterData.name, 'bold');\n\t\t\tsetText(ctx, 12, '#999', 85, 58, this.posterData.title);\n\t\t\tctx.save();\n\t\t\t/**\n\t\t\t * 绘制头像\n\t\t\t */\n\t\t\tctx.beginPath();\n\t\t\tlet avatar_width = 60; //头像宽度\n\t\t\tlet avatar_height = 60; //头像高度\n\t\t\tlet avatar_x = 15; //头像的x坐标\n\t\t\tlet avatar_y = 15; //头像的y坐标\n\t\t\tlet radius = 8; //头像的圆角弧度\n\t\t\t// 绘制圆角头像\n\t\t\tthis.setRadius(ctx, avatar_width, avatar_height, avatar_x, avatar_y, radius);\n\t\t\t// 绘制圆形图片\n\t\t\t// this.setCircular(ctx, avatar_width, avatar_height, avatar_x, avatar_y)\n\n\t\t\t// 绘制商品图片\n\t\t\tthis.setGoodsImg(ctx);\n\n\t\t\t// 绘制商品价格\n\t\t\tlet pirce = '￥ ' + this.posterData.money;\n\t\t\t// this.setGoodsPrice(ctx, 20, this.colors, 15, 410, pirce);\r\n\t\t\t\n\t\t\t// 绘制商品名称\n\t\t\tthis.setGoodsName(ctx);\n\t\t},\n\n\t\tsetEwm(ctx) {\n\t\t\tconsole.log('生成二维码');\n\t\t\tlet code_widht = 100; //二维码宽度\n\t\t\tlet code_height = 100; //二维码高度\n\t\t\tlet x = this.windowWidth - 170;\n\n\t\t\tlet myThis = this;\n\t\t\tconsole.log(this.windowWidth);\n\n\t\t\tuQRCode.make({\n\t\t\t\tcanvasId: 'mycanvas',\n\t\t\t\tcomponentInstance: this,\n\t\t\t\ttext: this.posterData.url,\n\t\t\t\tsize: 200,\n\t\t\t\tmargin: 10,\n\t\t\t\tfileType: 'png',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('生成二维码3');\n\n\t\t\t\t\tconsole.log('res = ' + res);\n\n\t\t\t\t\t// 将二维码添加到\n\t\t\t\t\t// ctx.drawImage(res, x, 410, code_widht, code_height);\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.canvasShow = false;\n\t\t\t\t\t\t//必须延时执行 不然h5不显示\n\t\t\t\t\t\tctx.save();\n\t\t\t\t\t\tctx.draw(false, () => {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tuni.canvasToTempFilePath(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcanvasId: 'mycanvas',\n\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t\t\t\t\tthis.imgUrl = res.tempFilePath;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t}, 1000);\n\t\t\t\t},\n\t\t\t\tcomplete: () => {}\n\t\t\t});\n\t\t},\n\t\tsetRadius(ctx, avatar_width, avatar_height, avatar_x, avatar_y, radius) {\n\t\t\t/**\n\t\t\t * 绘制圆角\n\t\t\t */\n\t\t\tctx.arc(avatar_x + radius, avatar_y + radius, radius, Math.PI, (Math.PI * 3) / 2);\n\t\t\tctx.lineTo(avatar_width - radius + avatar_x, avatar_y);\n\t\t\tctx.arc(avatar_width - radius + avatar_x, radius + avatar_y, radius, (Math.PI * 3) / 2, Math.PI * 2);\n\t\t\tctx.lineTo(avatar_width + avatar_x, avatar_height + avatar_y - radius);\n\t\t\tctx.arc(avatar_width - radius + avatar_x, avatar_height - radius + avatar_y, radius, 0, (Math.PI * 1) / 2);\n\t\t\tctx.lineTo(radius + avatar_x, avatar_height + avatar_y);\n\t\t\tctx.arc(radius + avatar_x, avatar_height - radius + avatar_y, radius, (Math.PI * 1) / 2, Math.PI);\n\t\t\t// 开始填充\n\t\t\tctx.strokeStyle = '#fff';\n\t\t\tctx.fill(); //保证图片无bug填充\n\t\t\tctx.clip(); //画了圆 再剪切  原始画布中剪切任意形状和尺寸。一旦剪切了某个区域，则所有之后的绘图都会被限制在被剪切的区域内\n\n\t\t\tctx.drawImage(this.posterData.logo, avatar_x, avatar_y, avatar_width, avatar_height);\n\t\t\tctx.closePath();\n\t\t\tctx.restore();\n\t\t},\n\t\tsetCircular(ctx, avatar_width, avatar_height, avatar_x, avatar_y) {\n\t\t\t//绘制圆形图片\n\t\t\t/**\n\t\t\t * 绘制圆形\n\t\t\t */\n\t\t\t//先画个圆   前两个参数确定了圆心 （x,y） 坐标  第三个参数是圆的半径  四参数是绘图方向  默认是false，即顺时针\n\t\t\tctx.arc(avatar_width / 2 + avatar_x, avatar_height / 2 + avatar_y, avatar_width / 2, 0, Math.PI * 2, false); //画圆\n\t\t\t// 开始填充\n\t\t\tctx.strokeStyle = '#fff';\n\t\t\tctx.fill(); //保证图片无bug填充\n\t\t\tctx.clip(); //画了圆 再剪切  原始画布中剪切任意形状和尺寸。一旦剪切了某个区域，则所有之后的绘图都会被限制在被剪切的区域内\n\n\t\t\tctx.drawImage(this.posterData.logo, avatar_x, avatar_y, avatar_width, avatar_height);\n\t\t\tctx.closePath();\n\t\t\tctx.restore();\n\t\t},\n\t\tsetGoodsImg(ctx) {\n\t\t\t//绘制中间商品图片\n\t\t\tlet width = this.windowWidth - 90;\n\t\t\tctx.drawImage(this.posterData.img, 15, 95, width, 350);\n\t\t\tctx.save();\n\t\t},\n\t\t// setGoodsPrice(ctx, fs, color, x, y, c, bold) {\n\t\t// \t//绘制商品价格\n\t\t// \tctx.setFillStyle(color);\n\t\t// \tctx.setTextAlign('left');\n\t\t// \tif (bold) {\n\t\t// \t\tctx.font = 'normal bold 20px Arial,sans-serif';\n\t\t// \t} else {\n\t\t// \t\tctx.font = 'normal 20px Arial,sans-serif';\n\t\t// \t}\n\t\t// \tctx.setFontSize(fs);\n\t\t// \tctx.fillText(c, x, y);\n\t\t// \tctx.restore();\n\t\t// },\n\t\tsetGoodsName(ctx) {\r\n\t\t\t\r\n\t\t\tif(this.posterData.remark){\r\n\t\t\t\t//绘制商品名称\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tx: 20, //绘制文本的左上角x坐标位置\r\n\t\t\t\t\ty: 470, //绘制文本的左上角y坐标位置\r\n\t\t\t\t\twidth: 210,\r\n\t\t\t\t\theight: 20,\r\n\t\t\t\t\tline: 2,\r\n\t\t\t\t\tcolor: '#202020',\r\n\t\t\t\t\tsize: 14, //字体的字号\r\n\t\t\t\t\talign: 'left',\r\n\t\t\t\t\tbaseline: 'top',\r\n\t\t\t\t\ttext: this.posterData.remark,\r\n\t\t\t\t\tbold: true\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tvar td = Math.ceil(obj.width / obj.size);\r\n\t\t\t\tvar tr = Math.ceil(obj.text.length / td);\r\n\t\t\t\tfor (var i = 0; i < tr; i++) {\r\n\t\t\t\t\tvar txt = {\r\n\t\t\t\t\t\tx: obj.x,\r\n\t\t\t\t\t\ty: obj.y + i * obj.height,\r\n\t\t\t\t\t\tcolor: obj.color,\r\n\t\t\t\t\t\tsize: obj.size,\r\n\t\t\t\t\t\talign: obj.align,\r\n\t\t\t\t\t\tbaseline: obj.baseline,\r\n\t\t\t\t\t\ttext: obj.text.substring(i * td, (i + 1) * td),\r\n\t\t\t\t\t\tbold: obj.bold\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (i < obj.line) {\r\n\t\t\t\t\t\tif (i == obj.line - 1) {\r\n\t\t\t\t\t\t\ttxt.text = txt.text.substring(0, txt.text.length - 3) + '......';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.drawText(ctx, txt); // TODO 将文字添加到画布上\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\n\t\t\t// 绘制二维码\n\t\t\t// this.setEwm(ctx);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.canvasShow = false;\r\n\t\t\t\t//必须延时执行 不然h5不显示\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.draw(false, () => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.canvasToTempFilePath(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcanvasId: 'mycanvas',\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\tthis.imgUrl = res.tempFilePath;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t});\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t}, 1000);\n\t\t},\n\t\t/**\n\t\t * 渲染文字\n\t\t *\n\t\t * @param {Object} obj\n\t\t */\n\t\tdrawText: function (ctx, obj) {\n\t\t\tconsole.log('渲染文字', obj);\n\t\t\tctx.save();\n\t\t\tctx.setFillStyle(obj.color);\n\t\t\tctx.setFontSize(obj.size);\n\t\t\tctx.setTextAlign(obj.align);\n\t\t\tctx.setTextBaseline(obj.baseline);\n\t\t\tif (obj.bold) {\n\t\t\t\tconsole.log('字体加粗');\n\t\t\t\tctx.fillText(obj.text, obj.x, obj.y - 0.1);\n\t\t\t\tctx.fillText(obj.text, obj.x - 0.1, obj.y);\n\t\t\t}\n\t\t\tctx.fillText(obj.text, obj.x, obj.y);\n\t\t\tif (obj.bold) {\n\t\t\t\tctx.fillText(obj.text, obj.x, obj.y + 0.1);\n\t\t\t\tctx.fillText(obj.text, obj.x + 0.1, obj.y);\n\t\t\t}\n\t\t\tctx.restore();\n\t\t},\n\t\tsaveImg() {\n\t\t\t//保存图片\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '保存中...'\n\t\t\t});\n\t\t\tlet that = this;\n\t\t\t// #ifdef MP\n\t\t\tuni.getSetting({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tif (!res.authSetting['scope.writePhotosAlbum']) {\n\t\t\t\t\t\twx.authorize({\n\t\t\t\t\t\t\tscope: 'scope.writePhotosAlbum',\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\t\tfilePath: that.imgUrl,\n\t\t\t\t\t\t\t\tsuccess(re) {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '保存成功',\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail(err) {\n\t\t\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '保存失败',\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t// #endif\n\t\t\t// #ifdef APP-PLUS\n\t\t\tsetTimeout(() => {\n\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\tfilePath: that.imgUrl,\n\t\t\t\t\tsuccess(re) {\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '保存成功',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '保存失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t\t// #endif\n\t\t}\n\t}\n};\n</script>\n<style scoped>\n.mycanvas {\n\tmargin: 0 auto;\n\tborder-radius: 10upx;\n\toverflow: hidden;\n}\n\n.saveImg {\n\twidth: 70%;\n\theight: 80upx;\n\tline-height: 80upx;\n\ttext-align: center;\n\tcolor: #fff;\n\tbackground-color: #4db8e4;\n\tborder-radius: 10upx;\n\tmargin: 40upx auto 20upx;\n}\n\n.imgs {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 50%;\n\tborder-radius: 10upx;\n\ttransform: translateX(-50%);\n\t/* 遮挡二维码 */\n\tbackground-color: white;\n\t/* 置于上层 */\n\tz-index: 99;\n}\n\n.tips {\n\ttext-align: center;\n\tcolor: #fff;\n\tfont-size: 24upx;\n\tmargin-top: 20upx;\n}\n</style>\n","import mod from \"-!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cc-beautyPoster.vue?vue&type=style&index=0&id=629d7fbc&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HarmonyOS\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cc-beautyPoster.vue?vue&type=style&index=0&id=629d7fbc&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1745756958936\n      var cssReload = require(\"D:/HarmonyOS/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}